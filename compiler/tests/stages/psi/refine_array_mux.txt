def psi(A: shared[list[int]], SA: plaintext[int], B: shared[list[int]], SB: plaintext[int]):
    dummy₁ = 0
    result₁ = []
    for i in range(0, SA₀):
        result₂ = Φ(result₁, result₃)
        flag₂ = False
        for j in range(0, SB₀):
            flag₃ = Φ(flag₂, flag₅)
            !1₃ = (A₀[i] == B₀[j])
            flag₄ = True
            flag₅ = MUX(!1₃, flag₄, flag₃)
        val₂ = dummy₁
        val₃ = A₀[i]
        val₄ = MUX(flag₃, val₃, val₂)
        !2₂ = [val₄]
        result₃ = (result₂ + !2₂)
    return result₂
