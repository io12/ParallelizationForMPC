def histogram(A: shared[list[int]], B: shared[list[int]], N: plaintext[int], num_bins: plaintext[int]):
    result₁ = []
    for i in range(0, num_bins₀):
        result₂ = Φ(result₁, result₃)
        !1₂ = [0]
        result₃ = (result₂ + !1₂)
    for i in range(0, num_bins₀):
        result₄ = Φ(result₂, result₅)
        for j in range(0, N₀):
            result₅ = Φ(result₄, result₇)
            !2₃ = (A₀[j] == i)
            !3₃ = (result₅[i] + B₀[j])
            result₆ = Update(result₅, i, !3₃)
            result₇ = MUX(!2₃, result₆, result₅)
    return result₄
